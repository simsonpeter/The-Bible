<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìñ Multilingual Bible</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Georgia', serif; line-height: 1.6; background: #f8f9fa; color: #333; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 30px; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        header h1 { margin-bottom: 20px; color: #2c3e50; }
        select { margin: 8px; padding: 10px; border: 2px solid #ddd; border-radius: 5px; font-size: 16px; min-width: 180px; }
        .selectors { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-bottom: 20px; }
        .bible-content { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); min-height: 400px; }
        .verse { margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
        .verse-number { font-weight: bold; color: #e74c3c; margin-right: 10px; }
        .placeholder { text-align: center; color: #7f8c8d; font-style: italic; }
        .error { color: #e74c3c; text-align: center; }
        .loading { text-align: center; color: #3498db; }
        .info { text-align: center; margin-top: 15px; font-size: 14px; color: #666; }
        @media (max-width: 600px) { 
            .selectors { flex-direction: column; align-items: center; }
            select { width: 100%; max-width: 280px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìñ Multilingual Bible</h1>
            <select id="versionSelect">
                <option value="">Select Version</option>
            </select>
            <div class="selectors">
                <select id="bookSelect" disabled>
                    <option value="">Select Book</option>
                </select>
                <select id="chapterSelect" disabled>
                    <option value="">Select Chapter</option>
                </select>
            </div>
            <div class="info" id="versionInfo"></div>
        </header>
        <div id="bibleContent" class="bible-content">
            <p class="placeholder">Select a version, book, and chapter to begin reading.</p>
        </div>
    </div>

    <script>
        // Bible versions configuration
        const VERSIONS = {
            kjv: {
                name: "King James Version",
                language: "English",
                folder: "kjv",
                books: [
                    "genesis", "exodus", "leviticus", "numbers", "deuteronomy",
                    "joshua", "judges", "ruth", "1samuel", "2samuel",
                    "1kings", "2kings", "1chronicles", "2chronicles", "ezra",
                    "nehemiah", "esther", "job", "psalms", "proverbs",
                    "ecclesiastes", "songofsolomon", "isaiah", "jeremiah", "lamentations",
                    "ezekiel", "daniel", "hosea", "joel", "amos",
                    "obadiah", "jonah", "micah", "nahum", "habakkuk",
                    "zephaniah", "haggai", "zechariah", "malachi",
                    "matthew", "mark", "luke", "john", "acts",
                    "romans", "1corinthians", "2corinthians", "galatians", "ephesians",
                    "philippians", "colossians", "1thessalonians", "2thessalonians", "1timothy",
                    "2timothy", "titus", "philemon", "hebrews", "james",
                    "1peter", "2peter", "1john", "2john", "3john",
                    "jude", "revelation"
                ],
                bookNames: [
                    "Genesis", "Exodus", "Leviticus", "Numbers", "Deuteronomy",
                    "Joshua", "Judges", "Ruth", "1 Samuel", "2 Samuel",
                    "1 Kings", "2 Kings", "1 Chronicles", "2 Chronicles", "Ezra",
                    "Nehemiah", "Esther", "Job", "Psalms", "Proverbs",
                    "Ecclesiastes", "Song of Solomon", "Isaiah", "Jeremiah", "Lamentations",
                    "Ezekiel", "Daniel", "Hosea", "Joel", "Amos",
                    "Obadiah", "Jonah", "Micah", "Nahum", "Habakkuk",
                    "Zephaniah", "Haggai", "Zechariah", "Malachi",
                    "Matthew", "Mark", "Luke", "John", "Acts",
                    "Romans", "1 Corinthians", "2 Corinthians", "Galatians", "Ephesians",
                    "Philippians", "Colossians", "1 Thessalonians", "2 Thessalonians", "1 Timothy",
                    "2 Timothy", "Titus", "Philemon", "Hebrews", "James",
                    "1 Peter", "2 Peter", "1 John", "2 John", "3 John",
                    "Jude", "Revelation"
                ]
            },
            rvr: {
                name: "Reina Valera 1960",
                language: "Espa√±ol",
                folder: "rvr",
                books: [
                    "genesis", "exodo", "levitico", "numeros", "deuteronomio",
                    "josue", "jueces", "rut", "1samuel", "2samuel",
                    "1reyes", "2reyes", "1cronicas", "2cronicas", "esdras",
                    "nehemias", "ester", "job", "salmos", "proverbios",
                    "eclesiastes", "cantsolom", "isaias", "jeremias", "lamentaciones",
                    "ezequiel", "daniel", "oseas", "joel", "amos",
                    "abdias", "jonas", "miqueas", "nahum", "habacuc",
                    "sofonias", "hageo", "zacarias", "malacai",
                    "mateo", "marcos", "lucas", "juan", "hechos",
                    "romanos", "1corintios", "2corintios", "galatas", "efesios",
                    "filipenses", "colosenses", "1tesalonicenses", "2tesalonicenses", "1timoteo",
                    "2timoteo", "tito", "filemon", "hebreos", "santiago",
                    "1pedro", "2pedro", "1juan", "2juan", "3juan",
                    "judas", "apocalipsis"
                ],
                bookNames: [
                    "G√©nesis", "√âxodo", "Lev√≠tico", "N√∫meros", "Deuteronomio",
                    "Josu√©", "Jueces", "Rut", "1 Samuel", "2 Samuel",
                    "1 Reyes", "2 Reyes", "1 Cr√≥nicas", "2 Cr√≥nicas", "Esdras",
                    "Nehem√≠as", "Ester", "Job", "Salmos", "Proverbios",
                    "Eclesiast√©s", "Cantares", "Isa√≠as", "Jerem√≠as", "Lamentaciones",
                    "Ezequiel", "Daniel", "Oseas", "Joel", "Am√≥s",
                    "Abd√≠as", "Jon√°s", "Miqueas", "Nahum", "Habacuc",
                    "Sofon√≠as", "Hageo", "Zacar√≠as", "Malaqu√≠as",
                    "Mateo", "Marcos", "Lucas", "Juan", "Hechos",
                    "Romanos", "1 Corintios", "2 Corintios", "G√°latas", "Efesios",
                    "Filipenses", "Colosenses", "1 Tesalonicenses", "2 Tesalonicenses", "1 Timoteo",
                    "2 Timoteo", "Tito", "Filem√≥n", "Hebreos", "Santiago",
                    "1 Pedro", "2 Pedro", "1 Juan", "2 Juan", "3 Juan",
                    "Judas", "Apocalipsis"
                ]
            }
            // Add more versions here following the same pattern
        };

        // State
        let currentVersion = null;

        // DOM Elements
        const versionSelect = document.getElementById('versionSelect');
        const bookSelect = document.getElementById('bookSelect');
        const chapterSelect = document.getElementById('chapterSelect');
        const bibleContent = document.getElementById('bibleContent');
        const versionInfo = document.getElementById('versionInfo');

        // Initialize the app
        function init() {
            populateVersionSelect();
            setupEventListeners();
        }

        // Populate version dropdown
        function populateVersionSelect() {
            versionSelect.innerHTML = '<option value="">Select Version</option>';
            
            Object.keys(VERSIONS).forEach(versionCode => {
                const version = VERSIONS[versionCode];
                const option = document.createElement('option');
                option.value = versionCode;
                option.textContent = `${version.name} (${version.language})`;
                versionSelect.appendChild(option);
            });
        }

        // Setup event listeners
        function setupEventListeners() {
            versionSelect.addEventListener('change', handleVersionChange);
            bookSelect.addEventListener('change', handleBookChange);
            chapterSelect.addEventListener('change', displayChapter);
        }

        // Handle version selection
        function handleVersionChange() {
            const versionCode = versionSelect.value;
            if (!versionCode) {
                resetBookChapterSelectors();
                return;
            }

            currentVersion = VERSIONS[versionCode];
            versionInfo.textContent = `Version: ${currentVersion.name} (${currentVersion.language})`;
            
            bookSelect.disabled = false;
            populateBookSelect();
        }

        // Populate book dropdown
        function populateBookSelect() {
            bookSelect.innerHTML = '<option value="">Select Book</option>';
            
            currentVersion.bookNames.forEach((bookName, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = bookName;
                bookSelect.appendChild(option);
            });
        }

        // Handle book selection
        async function handleBookChange() {
            const bookIndex = bookSelect.value;
            if (bookIndex === '') {
                resetChapterSelector();
                return;
            }

            try {
                bibleContent.innerHTML = '<p class="loading">Loading chapters...</p>';
                const bookFilename = currentVersion.books[bookIndex];
                const bookData = await loadBookData(currentVersion.folder, bookFilename);
                
                chapterSelect.disabled = false;
                chapterSelect.innerHTML = '<option value="">Select Chapter</option>';
                
                // Book data format: array of chapters
                for (let i = 0; i < bookData.length; i++) {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = `Chapter ${i + 1}`;
                    chapterSelect.appendChild(option);
                }
                
                bibleContent.innerHTML = '<p class="placeholder">Select a chapter to read.</p>';
            } catch (error) {
                console.error('Error loading book:', error);
                bibleContent.innerHTML = `
                    <p class="error">‚ùå Error loading book</p>
                    <p>${error.message}</p>
                    <p><strong>Required folder structure:</strong></p>
                    <ul>
                        <li>üìÅ ${currentVersion.folder}/</li>
                        <li>  ‚îú‚îÄ‚îÄ genesis.json</li>
                        <li>  ‚îú‚îÄ‚îÄ exodus.json</li>
                        <li>  ‚îú‚îÄ‚îÄ leviticus.json</li>
                        <li>  ‚îî‚îÄ‚îÄ ... (all 66 books with lowercase names)</li>
                    </ul>
                    <p><strong>How to set up:</strong></p>
                    <ol>
                        <li>Create folder: <strong>${currentVersion.folder}</strong></li>
                        <li>Download book files with names like: <strong>${currentVersion.books[0]}.json</strong></li>
                        <li>Place all 66 book files in the folder</li>
                    </ol>
                `;
            }
        }

        // Load individual book file (e.g., genesis.json, exodus.json)
        async function loadBookData(folder, bookFilename) {
            const response = await fetch(`${folder}/${bookFilename}.json`);
            
            if (!response.ok) {
                throw new Error(`Book file "${bookFilename}.json" not found in ${folder}/ folder`);
            }
            
            return await response.json();
        }

        // Display selected chapter
        async function displayChapter() {
            const bookIndex = bookSelect.value;
            const chapterIndex = chapterSelect.value;
            
            if (bookIndex === '' || chapterIndex === '') {
                bibleContent.innerHTML = '<p class="placeholder">Select a chapter to read.</p>';
                return;
            }
            
            try {
                const bookFilename = currentVersion.books[bookIndex];
                const bookData = await loadBookData(currentVersion.folder, bookFilename);
                const chapter = bookData[chapterIndex];
                
                let html = '';
                chapter.forEach(verse => {
                    // Handle different verse formats
                    const verseNum = verse.verse || verse.v || verse[0] || '';
                    const verseText = verse.text || verse.t || verse[1] || '';
                    html += `
                        <div class="verse">
                            <span class="verse-number">${verseNum}</span>
                            ${verseText}
                        </div>
                    `;
                });
                
                bibleContent.innerHTML = html;
            } catch (error) {
                console.error('Error displaying chapter:', error);
                bibleContent.innerHTML = `<p class="error">‚ùå Error loading chapter: ${error.message}</p>`;
            }
        }

        // Reset selectors
        function resetBookChapterSelectors() {
            bookSelect.disabled = true;
            bookSelect.innerHTML = '<option value="">Select Book</option>';
            resetChapterSelector();
        }

        function resetChapterSelector() {
            chapterSelect.disabled = true;
            chapterSelect.innerHTML = '<option value="">Select Chapter</option>';
            bibleContent.innerHTML = '<p class="placeholder">Select a version, book, and chapter to begin reading.</p>';
            versionInfo.textContent = '';
        }

        // Start the app
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
